{"version":3,"sources":["webpack:///webpack/bootstrap 307bba3907369c045e0c","webpack:///external \"chalk\"","webpack:///external \"path\"","webpack:///external \"fs-extra\"","webpack:///./src/graphml-parser.ts","webpack:///./src/schema-writer.ts","webpack:///external \"readline\"","webpack:///external \"pluralize\"","webpack:///external \"xml2js\"","webpack:///./src/app.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 307bba3907369c045e0c","module.exports = require(\"chalk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chalk\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 2\n// module chunks = 0","import * as XML from 'xml2js';\r\nimport { readFile } from 'fs-extra';\r\nimport * as chalk from 'chalk';\r\nexport class GraphParser {\r\n    protected getGraph(path: string): Promise<Graph[]> {\r\n        let Parser: XML.Parser = new XML.Parser();\r\n        return new Promise((resolve, reject) => {\r\n            readFile(path, (err, data: Buffer) => {\r\n                if (err) {\r\n                    console.info(chalk.red(`An error occured. This probably means you entered a path that doesn't point to a valid .graphml file. \\n Please correct this and try again`));\r\n                    reject(false);\r\n                    process.exit(1);\r\n                }\r\n                Parser.parseString(data.toString(), (err, result) => {\r\n                    if (err) {\r\n                        console.info(chalk.red(`An error occured. This means we couldn't parse the .graphml file you provided. \\n Please make sure of its integrity and try again.`));\r\n                        reject(false);\r\n                        process.exit();\r\n                    }\r\n                    resolve(result.graphml.graph);\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    parse(p: string): Promise<Collection[]> {\r\n        return new Promise((resolve, reject) => {\r\n            Promise.resolve()\r\n            .then(() => {\r\n                return this.getGraph(p);\r\n            })\r\n            .then((g: Graph[]) => {\r\n                let graph: Graph = g[0];\r\n                let labels: Label[] = [].concat(...graph.node.map(d => d['data']).map(d => d[0]['y:GenericNode'])).filter(d => d != undefined).map(d => d['y:NodeLabel']);\r\n                let collections: Collection[] = labels.map((datum: Label) => Object.assign({}, {collName: datum[0]['_'], collectionDef: datum[1]['_']})).filter(s => ('collName' in s && 'collectionDef' in s));\r\n                resolve(collections);\r\n            })\r\n            .catch(err => reject(err));\r\n        });\r\n    }\r\n}\r\n\r\n\r\ninterface Graph {\r\n    '$': {\r\n        edgedefault: string;\r\n        id: string;\r\n    };\r\n    data: Object[];\r\n    node: Node[];\r\n    edge: Object[];\r\n}\r\n\r\ninterface Label {\r\n    _: string;\r\n    '$': any;\r\n}\r\n\r\ninterface Node {\r\n    '$': {\r\n        id: string;\r\n    };\r\n    data: Object[];\r\n}\r\n\r\nexport interface Collection {\r\n    collName: string;\r\n    collectionDef: string;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/graphml-parser.ts","import { Collection } from './graphml-parser';\r\nimport { writeFile } from 'fs-extra';\r\nimport { resolve, join } from 'path';\r\nimport * as chalk from 'chalk';\r\nimport * as pluralize from 'pluralize';\r\n\r\nexport class Writer {\r\n    constructor() {\r\n        //\r\n    }\r\n\r\n    write(collections: Collection[], destination: string = '..') {\r\n        let p: string;\r\n        p = resolve(destination);\r\n        let promises: Promise<any>[] = collections.map((s: Collection) => this.exectute(p, s.collName, s.collectionDef));\r\n        return new Promise((resolve, reject) => {\r\n            Promise.all(promises)\r\n            .then(() => {\r\n                console.log(chalk.magenta(`Done writing all ${collections.length} collection interfaces!`));\r\n                resolve(true);\r\n            })\r\n            .catch(err => reject(err));\r\n        });\r\n    }\r\n\r\n    protected exectute(baseDest: string, collName: string, def: string): Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            let path: string = join(baseDest, `${collName}.interface.ts`);\r\n            let data = `import { ObjectID } from 'mongodb'; \\r\\ninterface ${this.getInterfaceName(collName)} ${def}`;\r\n            writeFile(path, data, (err) => {\r\n                if (err) {\r\n                    console.info(chalk.red(`An error occured.\\nThis probably means you entered a path to a directory that doesn't exist. \\nPlease correct this and try again`));\r\n                    reject(false);\r\n                    process.exit(1);\r\n                };\r\n                console.log(chalk.green(`written >> ${collName}.interface.ts`));\r\n                resolve(true);\r\n            });\r\n        });\r\n    }\r\n\r\n    protected getInterfaceName(collName: string): string {\r\n        let sing: string = pluralize.singular(collName);\r\n        let cap: string = sing.split('').map((c,i) => i === 0 ? c.toUpperCase() : c).join('');\r\n        let intname: string = `I${cap}`;\r\n        return intname\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/schema-writer.ts","module.exports = require(\"readline\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"readline\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"pluralize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pluralize\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"xml2js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"xml2js\"\n// module id = 7\n// module chunks = 0","import { resolve, normalize } from 'path';\r\nimport { createInterface, ReadLine } from 'readline';\r\nimport { Writer } from './schema-writer';\r\nimport { GraphParser, Collection } from './graphml-parser';\r\nimport { inspect } from 'util';\r\nimport * as chalk from 'chalk';\r\nlet args: string[] = process.argv.filter((a, i) => i > 1);\r\n\r\nlet parser: GraphParser = new GraphParser();\r\nlet writer: Writer = new Writer();\r\n\r\nlet path: string;\r\nlet out: string;\r\n\r\nif (args.length > 0) {\r\n    //load schema with arg1 as path and go to second step -- check if an out path was provided\r\n    path = args[0];\r\n\r\n    //if a out path was provided and is valid, write to that path. if not report error if any and ask for valid path.\r\n    out = resolve('.');\r\n    args[1] !== undefined ? out = resolve(args[1]) : out;\r\n    let p: string = resolve(path);\r\n    execute(p, out);\r\n} else {\r\n    const line: ReadLine = createInterface({input: process.stdin, output: process.stdout});\r\n    // launch assistant\r\n        //--ask where to load graph schema from\r\n        line.question(chalk.yellow('Where should we look for a .graphml file?\\n'), (answer: string) => {\r\n            Promise.resolve(resolve(answer))\r\n            .then((pin: string) => {\r\n                console.info(chalk.gray(`We'll read the .graphml file from: ${pin}`));\r\n                line.question(chalk.yellow('Where should we save the resulting interface files?\\n'), (answer: string) => {\r\n                    Promise.resolve(resolve(answer))\r\n                    .then((pout: string) => {\r\n                        console.info(chalk.gray(`We'll save the resulting interface files to: ${pout}\\n`));\r\n                        line.question(chalk.yellow('Does this look right to you? (yes/no)'), (answer: string) => {\r\n                            if (answer.trim() === 'no') {\r\n                                console.log('Change the paths as appropriate and try again.');\r\n                                process.exit(0);\r\n                            }\r\n\r\n                            if (answer.trim() !== 'yes') {\r\n                                console.log('Please answer with yes or no. (Type the words in their entirety)');\r\n                                process.exit(0);\r\n                            }\r\n\r\n                            execute(pin, pout);\r\n                        });\r\n                    })\r\n                    .catch(err => {\r\n                        console.log(chalk.red('Sorry, but that path is invalid. Try again.'));\r\n                        process.exit(1);\r\n                    });\r\n                });\r\n            })\r\n            .catch(err => {\r\n                console.log(chalk.red('Sorry, but that path is invalid. Try again.'));\r\n                process.exit(1);\r\n            });\r\n        });\r\n}\r\n\r\nfunction execute(pin: string, pout: string): void {\r\n    parser.parse(pin)\r\n    .then((data: Collection[]) => {\r\n        writer.write(data, pout)\r\n        .then(() => {\r\n            console.log(chalk.cyan('Process completed successfully!'));\r\n            process.exit(0);\r\n        })\r\n        .catch((err) => {\r\n            console.log(chalk.red(err));\r\n            process.exit(1);\r\n        })\r\n    })\r\n    .catch(err => {\r\n        console.log(chalk.red(err));\r\n    });\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app.ts"],"sourceRoot":""}